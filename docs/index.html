<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clone Hero Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }

        .thumbnail {
            display: inline-block;
            margin: 8px;
            text-align: center;
            width: 160px;
        }

        img {
            max-width: 150px;
            max-height: 150px;
            display: block;
            margin: 0 auto 5px;
        }

        .swatches {
            display: flex;
            gap: 6px;
            margin: 6px 0 12px;
        }

        .swatch {
            width: 50px;
            height: 50px;
            border: 1px solid #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>Clone Hero Viewer</h1>
<p id="scanMode">Loading scan modeâ€¦</p>

<h2>Highways</h2>
<div id="highways"></div>

<h2>Color Profiles</h2>
<div id="colorProfiles"></div>

<script>
fetch('scan_summary.json')
    .then(r => r.json())
    .then(data => {

        // Scan mode
        document.getElementById('scanMode').textContent =
            `Scan Mode: ${data.scan_mode || 'Unknown'}`;

        // Highways
        const highways = document.getElementById('highways');
        data.thumbnails.forEach(item => {
            const div = document.createElement('div');
            div.className = 'thumbnail';

            const img = document.createElement('img');
            img.src = item.thumbnail;
            div.appendChild(img);

            const cap = document.createElement('div');
            cap.textContent = item.file.replace(/\.[^/.]+$/, '');
            div.appendChild(cap);

            highways.appendChild(div);
        });

        // Color Profiles
        const profiles = document.getElementById('colorProfiles');

        data.color_profiles_data.forEach(profile => {
            const details = document.createElement('details');
            details.open = false;

            const summary = document.createElement('summary');
            summary.textContent = profile.filename.replace('.ini', '');
            details.appendChild(summary);

            const row = document.createElement('div');
            row.className = 'swatches';

            [
                'note_green',
                'note_red',
                'note_yellow',
                'note_blue',
                'note_orange',
                'note_sp_active',
                'note_open'
            ].forEach(field => {
                const swatch = document.createElement('div');
                swatch.className = 'swatch';

                if (profile[field]) {
                    swatch.style.backgroundColor = profile[field];
                } else {
                    swatch.textContent = 'X';
                }

                row.appendChild(swatch);
            });

            details.appendChild(row);
            profiles.appendChild(details);
        });
    })
    .catch(err => {
        document.body.innerHTML += `<p style="color:red">Error loading scan_summary.json</p>`;
        console.error(err);
    });
</script>

</body>
</html>
